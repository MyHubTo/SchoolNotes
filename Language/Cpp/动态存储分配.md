[TOC]
## 1.存储分配
存储分配就是为程序中用到的数据分配存储空间。
## 2.静态存储分配内存
通常变量数组都是`先定义再使用`，定义后编译器就可以根据其类型确定其所占存储空间的大小。

### 2.1静态存储空间分配的优点：
用户在编程时，只需定义变量或数组即可，等到变量或者数组的生命周期结束，编译器自动释放其分配的存储空间，不需要用户自己编程进行释放存储空间；<font color=red>生命周期结束后自动释放存储空间</font>
### 2.2静态存储空间分配的缺点：
静态存储空间的大小必须是<font color=red>常量</font>；即定义后不能再程序执行时进行更改其大小；

## 3.动态存储分配
在程序运行时，系统根据运行时的要求分配内存；

### 3.1 格式1:分配单个空间
```cpp
指针变量=new 类型名 (初始化变量)；//系统分配一个和类型名一致的变量空间，并用初值为这个空间赋值，同时将该空间的首地址返回；

int *p=new int(8);//表示系统在内存中分配了一个整型变量空间，同时初始化为8，并将其首地址赋值给指针变量p;
```
### 3.3 格式2：分配连续空间(数组)

```cpp
指针变量=new 类型名 [元素个数]；//分配连续空间时不能初始化；


int *p=new int[100];
```
### 3.2 格式3：分配大小不知的存储空间
```cpp
int *p=new int;//分配一个整形变量空间，此时该空间未被初始化。
```

* 因为内存的资源是有限的，所以动态分配存储空间，尤其是较大的数组空间时，<font color=red>有可能分配失败！这时new返回一个空指针(NULL)，表示发生了异常，资源不足，分配失败。所以需要在程序中判断这个返回值，防止程序出现异常；
</font>

* 用new运算符分配的存储空间，系统不能自动释放。**如果不再使用该空间时，要<font color=red>显式</font>的释放它所占用的存储空间，否则该存储空间一直保留。**

## 4.动态空间释放
```cpp
delete  指针名；

//释放连续存储空间

delete []指针名；
```
```cpp
#include<iostream>
using namespace std;
int main()
{
	int* p, n;
	double s = 0;
	cout << "请输入学生的人数：" << endl;
	cin >> n;
	p = new int[n];
	if (p == NULL)
	{
		cout << "分配空间失败！" << endl;
		return -1;
	}
	for (int i = 0; i < n; i++)
	{
		cout << "请输入第" << i + 1 << "个学生的成绩：";
		cin >> p[i];
		s = s + p[i];
	}
	cout << "学生的平均成绩是：" << s / n << endl;
	delete[]p;
	return 0;
}
```